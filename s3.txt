
S3 : Object based storage
EBS : block based storage
EFS : Storage over network

S3 = Simple Storage Service : AWS version Google Drive/OneDrive/Dropbox/icloud

bucket = folder / Directory
S3 bucket name should be unique.
Min : 3 char, max: 63 char..
Should contain only lowercase amnd 0-9 and . and -
Should not have two consecutive . (..)
Should not start with .
should not end with .

S3 has unlimited storage..
Min object 0 bytes
Max object Size : 50 TB


https://aviz-bucket-awar06a.s3.ap-south-1.amazonaws.com/aviz-logo.png

https://bucketname.s3.region.amazonaws.com/object-name

https://s3.region.amazonaws.com/bucketname/object-name


Storage classes
Versioning
Life Cycle RUle

Replication


------------------


Pricing : 
Size of the data : 
For API calls to access data : 
Data Retrival : 


Storage Classes : 

Durability : 99.999999999% (Chances to loss your data)..
Availability : varies for each storqage class..


S3 Standard : General Purpose storage for "frequently accessed data".. 
You can access data without delays..
Designed for availability : 99.99% 
AZ : >=3 AZ

S3 Standard-IA / Infrequently access :  S3 Stanfdard-IA is for the data that is accessed less frequently, but requires rapid access when needed..
You can access data without delays..
Designed for availability : 99.9% 
AZ : >=3 AZ

S3 OneZone-IA : Recreatable, infrequently accessed data (once a month) with milliseconds access.. 
You can access data without delays..
Designed for availability : 99.5% 
AZ : 1 AZ


Glacier Instant Retrieval : Long-lived archive data accessed once a quarter with instant retrieval in milliseconds..  Designed for availability : 99.9% 
Glacier Flexible Retrieval (formerly Glacier) : Long-lived archive data accessed once a year with retrieval of minutes to hours..Designed for availability : 99.99% 
Glacier Deep Archive : Long-lived archive data accessed less than once a year with retrieval of hours. Designed for availability : 99.99% 

We can't access data immedeatly when required.. We need to initialise the data restoration.. It depends on the storage class we choose.. 

Bulk retrieval : Typically within 5-12 hours.
Standard retrieval : Typically within 3-5 hours.
Expedited retrieval : Typically within 1-5 minutes when retrieving less than 250 MB.

---

Intelligent-Tiering : Data with changing or unknown access patterns: 99.9%

---

versioning : helps to Track changes happening on the file by creating a new versioned object..
helps to restore data to currect state, when any accidental overwrites happens..
Helps to restore the file, if any accidental deletes happens..


delete : Delete marker creates.. Set version to show.. and delete the "delete marker" to get your object back..
permanently delete : gone forever

---

Life Cycle management Rule : 
--> helps to trasit data from storage class to storage class automatically.
--> helps to delete the objects automatically (based on expire / perm delete)

---

S3 Replicaton : 

SRR : Same Region Replication : 
CRR : Cross Region Replication : 


---

Events : 


Bucket Policy


Effect : Allow / Deny 
Principal (IAM/group/role) :  
Actions : GetObject
Resource ARN (Amazon Resource Name) : 

ARN : Bucket level operation : Bucket ARN
ARN : Object level operation : Bucket ARN/*

*if you are not sure about bucket/object level operation, add both..


---

aviz-bucket-awar06a : Everyone should have read access, but one particular-user/anyuser should not able to upload anything into this bucket.


Effect : Deny 
Principal (IAM/group/role) :  arn:aws:iam::982424467695:user/s3-task
Actions : PutObject, DeleteObject
Resource ARN (Amazon Resource Name) : arn:aws:s3:::aviz-bucket-awar06a,arn:aws:s3:::aviz-bucket-awar06a/*

-------

Encryption : 

In Transit Encryption : Data encrypted when it is in travelling state : If you put a lock on your letter, only your friend can open it. using https:// website will encrypt your data.. 

At-Rest Encryption / SSE Server Side Encryption : Data encrypted when it is reached the server : Once you received the letter, you read it, then you dont leave on your table.. you put it into a bag/locker to secure it.

Client Side Encryption : We can encrypt the data in our local environment, that encr data, we can send to aws.. 


---


SSE - S3 (Server Side Encryption - S3) : Encryption key material generated and managed by S3 service.. Whoever has access to S3 platform, they can decrypt the data.. No addl permisisons required on encryption key.. 

SSE - KMS with DMK (Default Master Key) : Encryption key material generated and managed by KMS service.. Whoever has access to S3 platform, they can decrypt the data.. No addl permisisons required on encryption key.. 

SSE - KMS CMK (Customer Managed/Master key) : Encryption key material generated and managed by KMS service.. Along with the platform access, User should have "Key Usage" Permissons to decrypt the data.. Only platform access is not sufficient.. 

Step 1 : Choose the logic (symmetric)
Step 2 : Provide alias name and descryption
Step 3 : Choose "Key Administrators"
Step 4 : Choose "key users"


Symmetric Encryption key : One key used for encry and decryption.. 
Asymmetric Encryption key : We will have two keys.. Public key (you give to everyone) and private (you keep it secret)


SSE - KMS C (Customer Provided key) : Encryption key material generated and managed by Customer.. Along with the platform access, User should have "Key Usage" Permissons to decrypt the data.. Only platform access is not sufficient.. 

https://www.youtube.com/watch?v=r17Z75TqjU0

				Who owns key		Control			Audit
SSE-S3 : 		AWS					no				No
KMS-DMK			AWS					Limited			Yes
KMS CMK			AWS					Full			Yes
SSE-C			You/We				Full			Limited 


========

Static Website Hosting : 
--> No Server required to host website.
--> Defaulty we will get s3 perf for our website.
--> If you want to map a domain name to s3 bucket, You Bucket name should be same as DOmain Name.


HTTP Status Codes:

2xx : OK/Success
3xx : Redirection error
4xx : Client Side error
5xx : Server Side error

---

S3 performance : 
3500 PUT/COPY/POST/DELETE Requests per second per prefix.
5500 GET/HEAD requests per second per prefix.

How to Imrpove Performance:
1. Maintain uniqueness in object names.
2. Use multiple prefixes.
3. Use Multipart Upload for large objects.

aws s3api create-multipart-upload --bucket my-test-bucket --key movie.zip

---

S3 Consistency Model : 

Strong Consistency for all read-after-write operations: 
you upload/update/delete a file.. success.. you try to access the file --> you get response

---

Object Lock : 

Governance: Users with specific IAM permissions can overwrite or delete protected object versions during the retention period.
Compliance: No users can overwrite or delete protected object versions during the retention period.

---
Metrics: Defsultly we get "total no of obj and total size". Enable filters, if we need addl metrics..

Use "Storage lens" default dashboard to monitor your entire s3 platform resources.

Use IAM Access Analyzer to identify the resources shared over internet or across the accounts.
---

Transfer Accelerator : 

https://s3-accelerate-speedtest.s3-accelerate.amazonaws.com/en/accelerate-speed-comparsion.html?region=ap-south-1&origBucketName=amzn-s3-demo-bucket


Cloudfront / CDN (Content Delivery Network) : AWS uses its edge locations to cache the data to customer's nearby locations.. AWS has 700+ edge locatioon across the globe.. 

---

AWS Snow Family : Transfer data without using internet.. AWS sends a device, you copy data and send the device back.. 

AWS Snow mobile : Petabyte scale container.. 

---

Cloudfront ; CDN - Content Delivery Network..

--> No need to make s3 bucket pu8blic, We can use origin access identity settings to enable data transfer between cfd and s3 service.
--> Invalidation : helps to clear the cache from edge locations, so that we can deliver latest data to end customers.
--> geoLocation Restriction : We can allow/deny user requests from specific countries.

---

WAF : Web Application firewall : 


---

https://youtu.be/YrfDLrSVxQ8?si=hN_w27Eu8aSvRLik



















