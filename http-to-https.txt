Pre-Requisites:
Create A record for your domain with Instance IP Address.. 

learnaws.today.com
www.learnaws.today.com

Verify output with nslookup.. It should resolve to ec2 instance IP Address..


sudo dnf install -y certbot mod_ssl python3-certbot-apache

Create a configuration file first..

vim /etc/httpd/conf.d/learnawstoday.conf

---

<VirtualHost *:80>
    ServerName learnaws.today
    ServerAlias www.learnaws.today
    DocumentRoot /var/www/html
    
    <Directory /var/www/html>
        AllowOverride All
        Require all granted
    </Directory>
    
    ErrorLog /var/log/httpd/learnaws-error.log
    CustomLog /var/log/httpd/learnaws-access.log combined
</VirtualHost>

-----

sudo systemctl restart httpd

sudo apachectl configtest

sudo certbot --apache -d learnaws.today -d www.learnaws.today

sudo systemctl restart httpd



========
LOAD BALANCER EXAMPLE
========

_____________________________________
http to https redirection for Apache
_____________________________________

Open Apache configuration file : vim /etc/httpd/conf/httpd.conf
Add a rewrite rule to the VirtualHost section as below

<VirtualHost *:80>
RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-Proto} =http
RewriteRule .* https://%{HTTP:Host}%{REQUEST_URI} [L,R=permanent]
</VirtualHost>


Save file and restart the service



_____________________________________
Http to https redirection for Nginx 
_____________________________________


Open nginx configuration file :  /etc/nginx/nginx.conf
Add a below entry

server {
    listen 80;
    server_name _;
    if ($http_x_forwarded_proto = 'http'){
    return 301 https://$host$request_uri;
    }
}


Save file and restart the service